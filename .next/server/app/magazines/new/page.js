(()=>{var e={};e.id=579,e.ids=[579],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},2615:e=>{"use strict";e.exports=require("http")},5240:e=>{"use strict";e.exports=require("https")},5315:e=>{"use strict";e.exports=require("path")},8621:e=>{"use strict";e.exports=require("punycode")},6162:e=>{"use strict";e.exports=require("stream")},7360:e=>{"use strict";e.exports=require("url")},1568:e=>{"use strict";e.exports=require("zlib")},2385:(e,a,t)=>{"use strict";t.r(a),t.d(a,{GlobalError:()=>n.a,__next_app__:()=>u,originalPathname:()=>d,pages:()=>m,routeModule:()=>p,tree:()=>c}),t(8187),t(9815),t(5859);var s=t(2052),r=t(4966),i=t(2218),n=t.n(i),l=t(528),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);t.d(a,o);let c=["",{children:["magazines",{children:["new",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,8187)),"/Users/choi/Desktop/supabase-vibecoding/src/app/magazines/new/page.tsx"]}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,8768))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(t.bind(t,9815)),"/Users/choi/Desktop/supabase-vibecoding/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,5859,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,8768))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],m=["/Users/choi/Desktop/supabase-vibecoding/src/app/magazines/new/page.tsx"],d="/magazines/new/page",u={require:t,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/magazines/new/page",pathname:"/magazines/new",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},4340:(e,a,t)=>{Promise.resolve().then(t.t.bind(t,6064,23)),Promise.resolve().then(t.t.bind(t,5324,23)),Promise.resolve().then(t.t.bind(t,8330,23)),Promise.resolve().then(t.t.bind(t,1393,23)),Promise.resolve().then(t.t.bind(t,5635,23)),Promise.resolve().then(t.t.bind(t,5961,23))},4432:()=>{},3590:(e,a,t)=>{Promise.resolve().then(t.bind(t,6022))},1070:(e,a,t)=>{"use strict";t.d(a,{Z:()=>s});let s=(0,t(7529).Z)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},6963:(e,a,t)=>{"use strict";var s=t(2300);t.o(s,"useRouter")&&t.d(a,{useRouter:function(){return s.useRouter}})},6022:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>d});var s=t(5909),r=t(6665),i=t(1070),n=t(6963),l=t(2504);let o=()=>{let[e,a]=(0,r.useState)(!1),[t,s]=(0,r.useState)(null);return{submitMagazine:async e=>{a(!0),s(null);try{let a=null;if(e.imageFile){let t=new Date,s=t.getFullYear(),r=String(t.getMonth()+1).padStart(2,"0"),i=String(t.getDate()).padStart(2,"0"),n=crypto.randomUUID(),o=e.imageFile.name.split(".").pop()||"jpg",c=`${s}/${r}/${i}/${n}.${o}`,{error:m}=await l.O.storage.from("vibe-coding-storage").upload(c,e.imageFile,{cacheControl:"3600",upsert:!1});if(m)throw Error(`이미지 업로드 실패: ${m.message}`);let{data:d}=l.O.storage.from("vibe-coding-storage").getPublicUrl(c);a=d.publicUrl}let{data:t,error:s}=await l.O.from("magazine").insert([{category:e.category,title:e.title,description:e.description,content:e.content,tags:e.tags,image_url:a}]).select().single();if(s)throw s;if(!t)throw Error("데이터 등록에 실패했습니다.");return t.id}catch(e){return s(e instanceof Error?e.message:"알 수 없는 오류가 발생했습니다."),console.error("Magazine 등록 오류:",e),null}finally{a(!1)}},isSubmitting:e,error:t}},c=["인공지능","웹개발","클라우드","보안","모바일","데이터사이언스","블록체인","DevOps"];function m({value:e,onChange:a,options:t,placeholder:i}){let[n,l]=(0,r.useState)(!1),o=(0,r.useRef)(null);return(0,s.jsxs)("div",{className:"custom-dropdown",ref:o,children:[(0,s.jsxs)("button",{type:"button",className:"custom-dropdown-button",onClick:()=>l(!n),children:[s.jsx("span",{className:e?"":"custom-dropdown-placeholder",children:e||i}),s.jsx("svg",{className:`custom-dropdown-icon ${n?"open":""}`,width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:s.jsx("polyline",{points:"6 9 12 15 18 9"})})]}),n&&s.jsx("div",{className:"custom-dropdown-menu",children:t.map(t=>(0,s.jsxs)("div",{className:`custom-dropdown-item ${e===t?"selected":""}`,onClick:()=>{a(t),l(!1)},children:[t,e===t&&s.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:s.jsx("polyline",{points:"20 6 9 17 4 12"})})]},t))})]})}function d(){let e=(0,n.useRouter)(),{submitMagazine:a,isSubmitting:t,error:l}=o(),[d,u]=(0,r.useState)({category:"",title:"",summary:"",content:"",tags:""}),[p,g]=(0,r.useState)(null),[h,x]=(0,r.useState)(""),[f,j]=(0,r.useState)(!1),v=e=>{let{name:a,value:t}=e.target;u(e=>({...e,[a]:t}))},b=async t=>{t.preventDefault();let s=d.tags.split(" ").map(e=>e.trim()).filter(e=>e.length>0),r=await a({category:d.category,title:d.title,description:d.summary,content:d.content,tags:s.length>0?s:null,imageFile:p});r?(alert("등록에 성공하였습니다."),e.push(`/magazines/${r}`)):alert(l||"등록에 실패했습니다.")};return(0,s.jsxs)("div",{className:"magazine-form-container",children:[(0,s.jsxs)("button",{className:"magazine-detail-back",onClick:()=>{window.location.href="/magazines"},children:[s.jsx(i.Z,{className:"magazine-detail-back-icon"}),s.jsx("span",{children:"목록으로"})]}),(0,s.jsxs)("div",{className:"magazine-form-header",children:[s.jsx("h1",{children:"새 아티클 등록"}),s.jsx("p",{className:"magazine-form-subtitle",children:"IT 매거진에 새로운 기술 아티클을 등록합니다"})]}),(0,s.jsxs)("form",{className:"magazine-form",onSubmit:b,children:[(0,s.jsxs)("div",{className:"magazine-form-group",children:[s.jsx("label",{className:"magazine-form-label",children:"이미지 파일"}),h?(0,s.jsxs)("div",{className:"magazine-form-preview",children:[s.jsx("img",{src:h,alt:"미리보기",className:"magazine-form-preview-image"}),(0,s.jsxs)("button",{type:"button",className:"magazine-preview-remove",onClick:()=>{x(""),g(null)},children:[(0,s.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[s.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),s.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]}),"이미지 제거"]})]}):(0,s.jsxs)("div",{className:`magazine-file-upload-zone ${f?"dragging":""}`,onDragOver:e=>{e.preventDefault(),j(!0)},onDragLeave:e=>{e.preventDefault(),j(!1)},onDrop:e=>{e.preventDefault(),j(!1);let a=e.dataTransfer.files?.[0];if(a&&a.type.startsWith("image/")){g(a);let e=new FileReader;e.onloadend=()=>{x(e.result)},e.readAsDataURL(a)}},children:[s.jsx("input",{type:"file",id:"imageFile",name:"imageFile",className:"magazine-file-input-hidden",accept:"image/*",onChange:e=>{let a=e.target.files?.[0];if(a){g(a);let e=new FileReader;e.onloadend=()=>{x(e.result)},e.readAsDataURL(a)}}}),(0,s.jsxs)("label",{htmlFor:"imageFile",className:"magazine-file-upload-label",children:[s.jsx("div",{className:"magazine-file-upload-icon",children:(0,s.jsxs)("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[s.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),s.jsx("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),s.jsx("polyline",{points:"21 15 16 10 5 21"})]})}),(0,s.jsxs)("div",{className:"magazine-file-upload-text",children:[s.jsx("span",{className:"magazine-file-upload-primary",children:"클릭하여 이미지 선택"}),s.jsx("span",{className:"magazine-file-upload-secondary",children:"또는 드래그 앤 드롭"})]}),s.jsx("p",{className:"magazine-file-upload-hint",children:"JPG, PNG, GIF (최대 10MB)"})]})]})]}),(0,s.jsxs)("div",{className:"magazine-form-group",children:[(0,s.jsxs)("label",{className:"magazine-form-label",children:["카테고리 ",s.jsx("span",{className:"required-mark",children:"*"})]}),s.jsx(m,{value:d.category,onChange:e=>u(a=>({...a,category:e})),options:c,placeholder:"카테고리를 선택해주세요"})]}),(0,s.jsxs)("div",{className:"magazine-form-group",children:[s.jsx("label",{className:"magazine-form-label",htmlFor:"title",children:"제목"}),s.jsx("input",{type:"text",id:"title",name:"title",className:"magazine-form-input",placeholder:"예: 2025년 AI 트렌드: 생성형 AI의 진화",value:d.title,onChange:v,required:!0})]}),(0,s.jsxs)("div",{className:"magazine-form-group",children:[s.jsx("label",{className:"magazine-form-label",htmlFor:"summary",children:"한줄 소개"}),s.jsx("input",{type:"text",id:"summary",name:"summary",className:"magazine-form-input",placeholder:"아티클을 간단히 소개해주세요 (1-2문장)",value:d.summary,onChange:v,required:!0})]}),(0,s.jsxs)("div",{className:"magazine-form-group",children:[s.jsx("label",{className:"magazine-form-label",htmlFor:"content",children:"상세 내용"}),s.jsx("textarea",{id:"content",name:"content",className:"magazine-form-textarea",placeholder:"아티클의 상세 내용을 작성해주세요...",value:d.content,onChange:v,rows:10,required:!0})]}),(0,s.jsxs)("div",{className:"magazine-form-group",children:[s.jsx("label",{className:"magazine-form-label",htmlFor:"tags",children:"태그"}),s.jsx("input",{type:"text",id:"tags",name:"tags",className:"magazine-form-input",placeholder:"#React #TypeScript #JavaScript",value:d.tags,onChange:v}),s.jsx("p",{className:"magazine-form-hint",children:"공백으로 구분하여 입력해주세요 (예: #React #Node.js #WebDev)"})]}),s.jsx("button",{type:"submit",className:"magazine-form-submit",disabled:t,children:t?"등록 중...":"아티클 등록하기"})]})]})}},2504:(e,a,t)=>{"use strict";t.d(a,{O:()=>s});let s=(0,t(9261).eI)("https://kabeahnuheijxbzxszjk.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImthYmVhaG51aGVpanhienhzemprIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjE3NDE5NzgsImV4cCI6MjA3NzMxNzk3OH0.w1XQa3tI2tWj9r0DB8u7MeuVPi1uaDgoIdF6HcVMWqI")},9815:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>i,metadata:()=>r});var s=t(142);t(4766);let r={title:"Create Next App",description:"Generated by create next app"};function i({children:e}){return s.jsx("html",{lang:"en",children:s.jsx("body",{children:e})})}},8187:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>s});let s=(0,t(6018).createProxy)(String.raw`/Users/choi/Desktop/supabase-vibecoding/src/app/magazines/new/page.tsx#default`)},8768:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>r});var s=t(171);let r=e=>[{type:"image/x-icon",sizes:"16x16",url:(0,s.fillMetadataSegment)(".",e.params,"favicon.ico")+""}]},4766:()=>{}};var a=require("../../../webpack-runtime.js");a.C(e);var t=e=>a(a.s=e),s=a.X(0,[111,224,171,583],()=>t(2385));module.exports=s})();