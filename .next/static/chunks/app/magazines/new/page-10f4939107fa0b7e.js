(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[579],{7172:function(e,a,t){Promise.resolve().then(t.bind(t,3035))},8657:function(e,a,t){"use strict";t.d(a,{Z:function(){return n}});let n=(0,t(1956).Z)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},6834:function(e,a,t){"use strict";var n=t(9349);t.o(n,"useRouter")&&t.d(a,{useRouter:function(){return n.useRouter}})},3035:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return d}});var n=t(8947),i=t(3081),s=t(8657),r=t(6834),l=t(156);let o=()=>{let[e,a]=(0,i.useState)(!1),[t,n]=(0,i.useState)(null);return{submitMagazine:async e=>{a(!0),n(null);try{let a=null;if(e.imageFile){let t=new Date,n=t.getFullYear(),i=String(t.getMonth()+1).padStart(2,"0"),s=String(t.getDate()).padStart(2,"0"),r=crypto.randomUUID(),o=e.imageFile.name.split(".").pop()||"jpg",c="".concat(n,"/").concat(i,"/").concat(s,"/").concat(r,".").concat(o),{error:m}=await l.O.storage.from("vibe-coding-storage").upload(c,e.imageFile,{cacheControl:"3600",upsert:!1});if(m)throw Error("이미지 업로드 실패: ".concat(m.message));let{data:d}=l.O.storage.from("vibe-coding-storage").getPublicUrl(c);a=d.publicUrl}let{data:t,error:n}=await l.O.from("magazine").insert([{category:e.category,title:e.title,description:e.description,content:e.content,tags:e.tags,image_url:a}]).select().single();if(n)throw n;if(!t)throw Error("데이터 등록에 실패했습니다.");return t.id}catch(e){return n(e instanceof Error?e.message:"알 수 없는 오류가 발생했습니다."),console.error("Magazine 등록 오류:",e),null}finally{a(!1)}},isSubmitting:e,error:t}},c=["인공지능","웹개발","클라우드","보안","모바일","데이터사이언스","블록체인","DevOps"];function m(e){let{value:a,onChange:t,options:s,placeholder:r}=e,[l,o]=(0,i.useState)(!1),c=(0,i.useRef)(null);return(0,i.useEffect)(()=>{function e(e){c.current&&!c.current.contains(e.target)&&o(!1)}return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]),(0,n.jsxs)("div",{className:"custom-dropdown",ref:c,children:[(0,n.jsxs)("button",{type:"button",className:"custom-dropdown-button",onClick:()=>o(!l),children:[(0,n.jsx)("span",{className:a?"":"custom-dropdown-placeholder",children:a||r}),(0,n.jsx)("svg",{className:"custom-dropdown-icon ".concat(l?"open":""),width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,n.jsx)("polyline",{points:"6 9 12 15 18 9"})})]}),l&&(0,n.jsx)("div",{className:"custom-dropdown-menu",children:s.map(e=>(0,n.jsxs)("div",{className:"custom-dropdown-item ".concat(a===e?"selected":""),onClick:()=>{t(e),o(!1)},children:[e,a===e&&(0,n.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,n.jsx)("polyline",{points:"20 6 9 17 4 12"})})]},e))})]})}function d(){let e=(0,r.useRouter)(),{submitMagazine:a,isSubmitting:t,error:l}=o(),[d,u]=(0,i.useState)({category:"",title:"",summary:"",content:"",tags:""}),[g,h]=(0,i.useState)(null),[p,f]=(0,i.useState)(""),[x,j]=(0,i.useState)(!1),v=e=>{let{name:a,value:t}=e.target;u(e=>({...e,[a]:t}))},N=async t=>{t.preventDefault();let n=d.tags.split(" ").map(e=>e.trim()).filter(e=>e.length>0),i=await a({category:d.category,title:d.title,description:d.summary,content:d.content,tags:n.length>0?n:null,imageFile:g});i?(alert("등록에 성공하였습니다."),e.push("/magazines/".concat(i))):alert(l||"등록에 실패했습니다.")};return(0,n.jsxs)("div",{className:"magazine-form-container",children:[(0,n.jsxs)("button",{className:"magazine-detail-back",onClick:()=>{window.location.href="/magazines"},children:[(0,n.jsx)(s.Z,{className:"magazine-detail-back-icon"}),(0,n.jsx)("span",{children:"목록으로"})]}),(0,n.jsxs)("div",{className:"magazine-form-header",children:[(0,n.jsx)("h1",{children:"새 아티클 등록"}),(0,n.jsx)("p",{className:"magazine-form-subtitle",children:"IT 매거진에 새로운 기술 아티클을 등록합니다"})]}),(0,n.jsxs)("form",{className:"magazine-form",onSubmit:N,children:[(0,n.jsxs)("div",{className:"magazine-form-group",children:[(0,n.jsx)("label",{className:"magazine-form-label",children:"이미지 파일"}),p?(0,n.jsxs)("div",{className:"magazine-form-preview",children:[(0,n.jsx)("img",{src:p,alt:"미리보기",className:"magazine-form-preview-image"}),(0,n.jsxs)("button",{type:"button",className:"magazine-preview-remove",onClick:()=>{f(""),h(null)},children:[(0,n.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,n.jsx)("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),(0,n.jsx)("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]}),"이미지 제거"]})]}):(0,n.jsxs)("div",{className:"magazine-file-upload-zone ".concat(x?"dragging":""),onDragOver:e=>{e.preventDefault(),j(!0)},onDragLeave:e=>{e.preventDefault(),j(!1)},onDrop:e=>{var a;e.preventDefault(),j(!1);let t=null===(a=e.dataTransfer.files)||void 0===a?void 0:a[0];if(t&&t.type.startsWith("image/")){h(t);let e=new FileReader;e.onloadend=()=>{f(e.result)},e.readAsDataURL(t)}},children:[(0,n.jsx)("input",{type:"file",id:"imageFile",name:"imageFile",className:"magazine-file-input-hidden",accept:"image/*",onChange:e=>{var a;let t=null===(a=e.target.files)||void 0===a?void 0:a[0];if(t){h(t);let e=new FileReader;e.onloadend=()=>{f(e.result)},e.readAsDataURL(t)}}}),(0,n.jsxs)("label",{htmlFor:"imageFile",className:"magazine-file-upload-label",children:[(0,n.jsx)("div",{className:"magazine-file-upload-icon",children:(0,n.jsxs)("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,n.jsx)("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),(0,n.jsx)("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),(0,n.jsx)("polyline",{points:"21 15 16 10 5 21"})]})}),(0,n.jsxs)("div",{className:"magazine-file-upload-text",children:[(0,n.jsx)("span",{className:"magazine-file-upload-primary",children:"클릭하여 이미지 선택"}),(0,n.jsx)("span",{className:"magazine-file-upload-secondary",children:"또는 드래그 앤 드롭"})]}),(0,n.jsx)("p",{className:"magazine-file-upload-hint",children:"JPG, PNG, GIF (최대 10MB)"})]})]})]}),(0,n.jsxs)("div",{className:"magazine-form-group",children:[(0,n.jsxs)("label",{className:"magazine-form-label",children:["카테고리 ",(0,n.jsx)("span",{className:"required-mark",children:"*"})]}),(0,n.jsx)(m,{value:d.category,onChange:e=>u(a=>({...a,category:e})),options:c,placeholder:"카테고리를 선택해주세요"})]}),(0,n.jsxs)("div",{className:"magazine-form-group",children:[(0,n.jsx)("label",{className:"magazine-form-label",htmlFor:"title",children:"제목"}),(0,n.jsx)("input",{type:"text",id:"title",name:"title",className:"magazine-form-input",placeholder:"예: 2025년 AI 트렌드: 생성형 AI의 진화",value:d.title,onChange:v,required:!0})]}),(0,n.jsxs)("div",{className:"magazine-form-group",children:[(0,n.jsx)("label",{className:"magazine-form-label",htmlFor:"summary",children:"한줄 소개"}),(0,n.jsx)("input",{type:"text",id:"summary",name:"summary",className:"magazine-form-input",placeholder:"아티클을 간단히 소개해주세요 (1-2문장)",value:d.summary,onChange:v,required:!0})]}),(0,n.jsxs)("div",{className:"magazine-form-group",children:[(0,n.jsx)("label",{className:"magazine-form-label",htmlFor:"content",children:"상세 내용"}),(0,n.jsx)("textarea",{id:"content",name:"content",className:"magazine-form-textarea",placeholder:"아티클의 상세 내용을 작성해주세요...",value:d.content,onChange:v,rows:10,required:!0})]}),(0,n.jsxs)("div",{className:"magazine-form-group",children:[(0,n.jsx)("label",{className:"magazine-form-label",htmlFor:"tags",children:"태그"}),(0,n.jsx)("input",{type:"text",id:"tags",name:"tags",className:"magazine-form-input",placeholder:"#React #TypeScript #JavaScript",value:d.tags,onChange:v}),(0,n.jsx)("p",{className:"magazine-form-hint",children:"공백으로 구분하여 입력해주세요 (예: #React #Node.js #WebDev)"})]}),(0,n.jsx)("button",{type:"submit",className:"magazine-form-submit",disabled:t,children:t?"등록 중...":"아티클 등록하기"})]})]})}},156:function(e,a,t){"use strict";t.d(a,{O:function(){return n}});let n=(0,t(4365).eI)("https://kabeahnuheijxbzxszjk.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImthYmVhaG51aGVpanhienhzemprIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjE3NDE5NzgsImV4cCI6MjA3NzMxNzk3OH0.w1XQa3tI2tWj9r0DB8u7MeuVPi1uaDgoIdF6HcVMWqI")}},function(e){e.O(0,[199,580,996,744],function(){return e(e.s=7172)}),_N_E=e.O()}]);