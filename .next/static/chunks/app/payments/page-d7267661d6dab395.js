(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[74],{8479:function(e,a,s){Promise.resolve().then(s.bind(s,9427))},9427:function(e,a,s){"use strict";s.r(a),s.d(a,{default:function(){return i}});var n=s(8947),c=s(8657),l=s(6834),t=s(6510);let r=()=>{let e=(0,l.useRouter)();return{handleSubscribe:async()=>{try{let a,s;let n="store-1759eb80-a1b5-4827-8b1d-7acc8e5910a6",c="channel-key-1105a541-89d8-41b1-bf3d-2c30c480189e";if(!n||!c){alert("포트원 설정이 누락되었습니다. 환경 변수를 확인해주세요.");return}let l="test_customer_".concat(Date.now());try{a=await t.Vm({storeId:n,channelKey:c,billingKeyMethod:"CARD",issueId:"issue_".concat(Date.now(),"_").concat(Math.random().toString(36).substring(2,11)),issueName:"IT 매거진 월간 구독",customer:{customerId:l}})}catch(e){console.error("빌링키 발급 요청 실패:",e),alert("빌링키 발급 요청에 실패했습니다: ".concat(e instanceof Error?e.message:"알 수 없는 오류"));return}if(!a||a.code||!a.billingKey){alert("빌링키 발급에 실패했습니다: ".concat((null==a?void 0:a.message)||"알 수 없는 오류"));return}try{s=await fetch("/api/payments",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({billingKey:a.billingKey,orderName:"IT 매거진 월간 구독",amount:9900,customer:{id:l}})})}catch(e){console.error("API 요청 실패:",e),alert("결제 API 요청에 실패했습니다. 네트워크 연결을 확인해주세요.");return}if(!s.ok){let e="알 수 없는 오류";try{e=(await s.json()).error||e}catch(a){e="서버 오류 (".concat(s.status,")")}alert("결제에 실패했습니다: ".concat(e));return}let r=await s.json();if(!r.success){alert("결제에 실패했습니다: ".concat(r.error||"알 수 없는 오류"));return}alert("구독에 성공하였습니다."),e.push("/magazines")}catch(a){console.error("구독 처리 중 오류:",a);let e=a instanceof Error?a.message:"알 수 없는 오류가 발생했습니다.";alert("구독 처리 중 오류가 발생했습니다: ".concat(e))}}}};function i(){let e=(0,l.useRouter)(),{handleSubscribe:a}=r();return(0,n.jsxs)("div",{className:"magazine-form-container magazine-payment-page",children:[(0,n.jsxs)("button",{className:"magazine-detail-back",onClick:()=>{e.push("/magazines")},children:[(0,n.jsx)(c.Z,{className:"magazine-detail-back-icon"}),(0,n.jsx)("span",{children:"목록으로"})]}),(0,n.jsxs)("div",{className:"magazine-form-header",children:[(0,n.jsx)("h1",{children:"IT 매거진 구독"}),(0,n.jsx)("p",{className:"magazine-form-subtitle",children:"프리미엄 콘텐츠를 제한 없이 이용하세요"})]}),(0,n.jsx)("div",{className:"payment-content",children:(0,n.jsxs)("div",{className:"payment-card",children:[(0,n.jsxs)("div",{className:"payment-card-header",children:[(0,n.jsx)("h2",{className:"payment-plan-title",children:"월간 구독"}),(0,n.jsx)("p",{className:"payment-plan-description",children:"모든 IT 매거진 콘텐츠에 무제한 접근"})]}),(0,n.jsxs)("div",{className:"payment-card-body",children:[(0,n.jsxs)("div",{className:"payment-price-section",children:[(0,n.jsx)("span",{className:"payment-price",children:"9,900원"}),(0,n.jsx)("span",{className:"payment-period",children:"/월"})]}),(0,n.jsxs)("div",{className:"payment-features",children:[(0,n.jsxs)("div",{className:"payment-feature-item",children:[(0,n.jsx)("svg",{className:"payment-check-icon",viewBox:"0 0 20 20",fill:"currentColor",children:(0,n.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),(0,n.jsx)("span",{children:"모든 프리미엄 아티클 열람"})]}),(0,n.jsxs)("div",{className:"payment-feature-item",children:[(0,n.jsx)("svg",{className:"payment-check-icon",viewBox:"0 0 20 20",fill:"currentColor",children:(0,n.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),(0,n.jsx)("span",{children:"최신 기술 트렌드 리포트"})]}),(0,n.jsxs)("div",{className:"payment-feature-item",children:[(0,n.jsx)("svg",{className:"payment-check-icon",viewBox:"0 0 20 20",fill:"currentColor",children:(0,n.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),(0,n.jsx)("span",{children:"광고 없는 읽기 환경"})]}),(0,n.jsxs)("div",{className:"payment-feature-item",children:[(0,n.jsx)("svg",{className:"payment-check-icon",viewBox:"0 0 20 20",fill:"currentColor",children:(0,n.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),(0,n.jsx)("span",{children:"언제든지 구독 취소 가능"})]})]}),(0,n.jsx)("button",{className:"payment-subscribe-button",onClick:a,children:"구독하기"})]})]})})]})}}},function(e){e.O(0,[968,580,996,744],function(){return e(e.s=8479)}),_N_E=e.O()}]);